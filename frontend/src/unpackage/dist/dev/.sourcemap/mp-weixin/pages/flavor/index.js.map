{"version":3,"sources":["uni-app:///main.js","webpack:///C:/myprojects2/MeetingChangAn/pages/flavor/index.vue?0169","webpack:///C:/myprojects2/MeetingChangAn/pages/flavor/index.vue?00d7","webpack:///C:/myprojects2/MeetingChangAn/pages/flavor/index.vue?05c2","webpack:///C:/myprojects2/MeetingChangAn/pages/flavor/index.vue?2544","uni-app:///pages/flavor/index.vue","webpack:///C:/myprojects2/MeetingChangAn/pages/flavor/index.vue?1b55","webpack:///C:/myprojects2/MeetingChangAn/pages/flavor/index.vue?8367"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","searchFoods","searchByTag","getAllTags","getFoodsByFeatureTags","data","query","selectedCatId","categories","foods","hotFoods","defaultImg","bottomIcons","id","label","img","loading","onLoad","methods","initCategories","name","type","tag","featureTag","onSearch","keyword","uni","title","icon","response","results","city","introduction","features","history","console","addToList","goFoodDetail","url","selectCategory","loadFoodsByCategory","cat","featureTags","loadMockData","loadHotFoods","allFoods","hotCount","selectedFoods","intro","goPage","tong","fengwei","qingdan","profile","feiyi"],"mappings":"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","file":"pages/flavor/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/flavor/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=786192cc&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=786192cc&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"786192cc\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/flavor/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=786192cc&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.categories.length\n  var g1 = !_vm.loading ? _vm.foods.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<script>\r\nconst { searchFoods, searchByTag, getAllTags, getFoodsByFeatureTags } = require('../../api/foods.js')\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      query: '',\r\n      selectedCatId: '',\r\n      // 左列分类（整合了基础分类和特色标签）\r\n      categories: [],\r\n      // 右侧美食卡片\r\n      foods: [],\r\n      // 热门推荐列表\r\n      hotFoods: [],\r\n      // 默认图片\r\n      defaultImg: '/static/assets/retouch_2025112414392946.png',\r\n      bottomIcons: [\r\n        { id: 'qingdan', label: '陕游记', img: '/static/assets/retouch_2025112414391093.png' },\r\n        { id: 'fengwei', label: '陕味集', img: '/static/assets/retouch_2025112414392946.png' },\r\n        { id: 'feiyi', label: '陕非遗', img: '/static/assets/retouch_2025112414400271.png' },\r\n        { id: 'profile', label: '个人中心', img: '/static/assets/retouch_2025112414394823.png' }\r\n      ],\r\n      loading: false\r\n    }\r\n  },\r\n  onLoad() {\r\n    this.initCategories()\r\n    this.loadHotFoods()\r\n  },\r\n  methods: {\r\n    // 初始化分类\r\n    async initCategories() {\r\n      // 整合基础分类和特色标签\r\n      this.categories = [\r\n        // 基础分类\r\n        { id: 'noodle', name: '面食', type: 'category', tag: '面食' },\r\n        { id: 'snack', name: '小吃', type: 'category', tag: '小吃' },\r\n        // 特色标签\r\n        { id: 'heritage', name: '非遗美食', type: 'feature', featureTag: '非遗美食' },\r\n        { id: 'classic', name: '老字号', type: 'feature', featureTag: '老字号' },\r\n        { id: 'trending', name: '网红打卡', type: 'feature', featureTag: '网红打卡' },\r\n        { id: 'local', name: '本地人推荐', type: 'feature', featureTag: '本地人推荐' },\r\n        // 热门推荐\r\n        { id: 'hot', name: '热门推荐', type: 'hot' }\r\n      ]\r\n      \r\n      // 默认选中第一个分类\r\n      this.selectedCatId = this.categories[0].id\r\n      \r\n      // 加载第一个分类的数据\r\n      await this.loadFoodsByCategory(this.categories[0])\r\n      \r\n      // 预加载热门推荐数据\r\n      await this.loadHotFoods()\r\n    },\r\n    \r\n    // 搜索功能\r\n    async onSearch() {\r\n      const keyword = this.query.trim()\r\n      if (!keyword) {\r\n        uni.showToast({ title: '请输入搜索关键词', icon: 'none' })\r\n        return\r\n      }\r\n      \r\n      try {\r\n        this.loading = true\r\n        // 同时按名称和标签搜索\r\n        const response = await searchFoods(keyword, keyword)\r\n        \r\n        // 处理不同的返回格式\r\n        let results = []\r\n        if (response && response.data) {\r\n          results = Array.isArray(response.data) ? response.data : []\r\n        } else if (Array.isArray(response)) {\r\n          results = response\r\n        }\r\n        \r\n        if (results.length === 0) {\r\n          uni.showToast({ title: '未找到相关美食', icon: 'none' })\r\n          return\r\n        }\r\n        \r\n        // 映射后端字段到前端\r\n        this.foods = results.map(item => ({\r\n          id: item.id,\r\n          name: item.foodName || item.name || '',\r\n          img: item.imageUrl || item.image || item.img || item.coverImage || this.defaultImg,\r\n          tag: item.tag || '',\r\n          city: item.city || '',\r\n          introduction: item.introduction || '',\r\n          features: item.features || '',\r\n          history: item.history || ''\r\n        }))\r\n        \r\n        uni.showToast({ title: `找到 ${results.length} 个结果`, icon: 'success' })\r\n      } catch (error) {\r\n        console.error('搜索失败:', error)\r\n        uni.showToast({ title: '搜索失败', icon: 'none' })\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    addToList(food) {\r\n      // 预留加清单逻辑\r\n      uni.showToast({ title: '已加入清单', icon: 'success' })\r\n    },\r\n    \r\n    // 跳转到美食详情页\r\n    goFoodDetail(food) {\r\n      if (!food || !food.id) {\r\n        uni.showToast({ title: '美食信息不完整', icon: 'none' })\r\n        return\r\n      }\r\n      uni.navigateTo({\r\n        url: `/pages/noodle/item?id=${food.id}&foodName=${encodeURIComponent(food.name)}`\r\n      })\r\n    },\r\n    \r\n    // 选择分类\r\n    async selectCategory(cat) {\r\n      this.selectedCatId = cat.id\r\n      await this.loadFoodsByCategory(cat)\r\n    },\r\n    \r\n    // 按分类加载美食\r\n    async loadFoodsByCategory(cat) {\r\n      try {\r\n        this.loading = true\r\n        \r\n        // 如果是热门推荐，直接使用已加载的热门数据\r\n        if (cat.type === 'hot') {\r\n          this.foods = this.hotFoods.map(item => ({\r\n            id: item.id,\r\n            name: item.name,\r\n            img: item.img,\r\n            tag: '',\r\n            city: '',\r\n            introduction: item.intro || '',\r\n            features: '',\r\n            history: ''\r\n          }))\r\n          this.loading = false\r\n          return\r\n        }\r\n        \r\n        let response\r\n        let foods = []\r\n        \r\n        // 判断是基础分类还是特色标签\r\n        if (cat.type === 'feature') {\r\n          // 特色标签筛选\r\n          console.log('[特色标签筛选] 标签:', cat.featureTag)\r\n          response = await getFoodsByFeatureTags([cat.featureTag])\r\n        } else {\r\n          // 基础分类筛选\r\n          console.log('[基础分类筛选] 标签:', cat.tag)\r\n          response = await searchByTag(cat.tag || cat.name)\r\n        }\r\n        \r\n        // 处理不同的返回格式\r\n        if (response && response.data) {\r\n          foods = Array.isArray(response.data) ? response.data : []\r\n        } else if (Array.isArray(response)) {\r\n          foods = response\r\n        }\r\n        \r\n        // 映射后端字段到前端\r\n        this.foods = foods.map(item => ({\r\n          id: item.id,\r\n          name: item.foodName || item.name || '',\r\n          img: item.imageUrl || item.image || item.img || item.coverImage || this.defaultImg,\r\n          tag: item.tag || '',\r\n          city: item.city || '',\r\n          introduction: item.introduction || '',\r\n          features: item.features || '',\r\n          history: item.history || '',\r\n          featureTags: item.featureTags || '' // 新增特色标签字段\r\n        }))\r\n        \r\n        if (this.foods.length === 0) {\r\n          console.log('该分类暂无数据，使用示例数据')\r\n          this.loadMockData()\r\n        }\r\n      } catch (error) {\r\n        console.error('加载分类数据失败:', error)\r\n        // 失败时使用示例数据\r\n        this.loadMockData()\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    // 加载示例数据（测试用）\r\n    loadMockData() {\r\n      this.foods = [\r\n        { id: 'biang', name: 'biángbiáng面', img: this.defaultImg },\r\n        { id: 'qishan', name: '岐山臊子面', img: this.defaultImg },\r\n        { id: 'youpo', name: '油泼面', img: this.defaultImg },\r\n        { id: 'liangpi', name: '凉皮', img: this.defaultImg }\r\n      ]\r\n    },\r\n    \r\n    // 加载热门推荐美食\r\n    async loadHotFoods() {\r\n      try {\r\n        console.log('[热门推荐] 开始加载...')\r\n        \r\n        // 获取所有美食数据（不传标签参数）\r\n        const response = await getFoodsByFeatureTags([])\r\n        \r\n        // 处理不同的返回格式\r\n        let allFoods = []\r\n        if (response && response.data) {\r\n          allFoods = Array.isArray(response.data) ? response.data : []\r\n        } else if (Array.isArray(response)) {\r\n          allFoods = response\r\n        }\r\n        \r\n        console.log('[热门推荐] 获取到美食数量:', allFoods.length)\r\n        \r\n        if (allFoods.length === 0) {\r\n          console.warn('[热门推荐] 没有数据')\r\n          return\r\n        }\r\n        \r\n        // 选取前6个作为热门推荐（可以根据实际需求调整数量或排序逻辑）\r\n        const hotCount = Math.min(6, allFoods.length)\r\n        const selectedFoods = allFoods.slice(0, hotCount)\r\n        \r\n        // 映射后端字段到前端，只保留需要的字段：图片、名字、介绍\r\n        this.hotFoods = selectedFoods.map(item => ({\r\n          id: item.id,\r\n          name: item.foodName || item.name || '',\r\n          img: item.imageUrl || item.image || item.img || item.coverImage || this.defaultImg,\r\n          intro: item.introduction || item.intro || item.description || item.features || ''\r\n        }))\r\n        \r\n        console.log('[热门推荐] 热门美食数量:', this.hotFoods.length)\r\n      } catch (error) {\r\n        console.error('[热门推荐] 加载失败:', error)\r\n      }\r\n    },\r\n\r\n    goPage(id) {\r\n      const routes = {\r\n        tong: '/pages/index/index',\r\n        fengwei: '/pages/flavor/index',\r\n        qingdan: '/pages/checklist/index',\r\n        profile: '/pages/mine/index',\r\n        feiyi: '/pages/heritage/index'\r\n      }\r\n      const url = routes[id]\r\n      if (!url) {\r\n        uni.showToast({ title: '页面开发中', icon: 'none' })\r\n        return\r\n      }\r\n      // 如果是当前页，不跳转\r\n      const pages = getCurrentPages()\r\n      const currentPage = pages[pages.length - 1]\r\n      if (currentPage && ('/' + currentPage.route) === url) {\r\n        return\r\n      }\r\n      // 如果跳转到陕面通首页，使用 reLaunch 清空栈\r\n      if (url === '/pages/index/index') {\r\n        uni.reLaunch({ url })\r\n      } else {\r\n        // 其他页面使用 navigateTo，保留返回按钮\r\n        uni.navigateTo({ url })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <page-meta page-style=\"overflow:auto;min-height:100vh\" />\r\n  <view class=\"flavor-page\">\r\n\r\n    <view class=\"top-search\">\r\n      <input class=\"search-input\" v-model=\"query\" placeholder=\"搜索陕味...\" confirm-type=\"search\" @confirm=\"onSearch\" />\r\n      <view class=\"search-icon\">+</view> <!-- 使用加号样式作为放大镜圆角，视觉更接近示意图 -->\r\n    </view>\r\n\r\n    <view class=\"brown-dashed\"></view>\r\n\r\n    <view class=\"image-holder\">\r\n      <image class=\"holder-img\" src=\"/static/assets/IMG_20251125_171347.jpg\" mode=\"aspectFill\" />\r\n    </view>\r\n\r\n    <view class=\"grid-wrap\">\r\n      <view class=\"grid-left\">\r\n        <view class=\"left-header\">分类</view>\r\n        <view class=\"left-lines\">\r\n          <view\r\n            v-for=\"(cat, index) in categories\"\r\n            :key=\"cat.id\"\r\n            class=\"left-cell\"\r\n            :class=\"{ active: selectedCatId === cat.id, 'last-item': index === categories.length - 1 }\"\r\n            @tap=\"selectCategory(cat)\"\r\n          >\r\n            {{ cat.name }}\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <scroll-view class=\"grid-right\" scroll-y>\r\n        <view v-if=\"loading\" class=\"loading-tip\">加载中...</view>\r\n        <view v-else-if=\"foods.length === 0\" class=\"empty-tip\">暂无数据</view>\r\n        <template v-else>\r\n          <view v-for=\"food in foods\" :key=\"food.id\" class=\"food-row\">\r\n            <view class=\"food-card\" @tap=\"goFoodDetail(food)\">\r\n              <text class=\"food-name\">{{ food.name }}</text>\r\n              <image class=\"food-img\" :src=\"food.img\" mode=\"aspectFill\" />\r\n            </view>\r\n            <view class=\"add-circle\" @tap.stop=\"addToList(food)\"><text class=\"plus\">+</text></view>\r\n          </view>\r\n        </template>\r\n      </scroll-view>\r\n    </view>\r\n\r\n\r\n\r\n    <!-- 固定底部图标：复用首页结构样式 -->\r\n    <view class=\"icons-fixed\">\r\n      <image class=\"chopsticks-fixed\" src=\"/static/assets/retouch_2025111915301620.png\" mode=\"widthFix\" />\r\n      <view class=\"icons-top\">\r\n        <view class=\"icon-block\" @tap=\"goPage('tong')\">\r\n          <view class=\"top-circle-wrap\">\r\n            <image class=\"icon-img\" src=\"/static/assets/retouch_2025112414375907.png\" mode=\"widthFix\" />\r\n          </view>\r\n          <text class=\"icon-label\">陕面通</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"icons-bottom\">\r\n        <view v-for=\"icon in bottomIcons\" :key=\"icon.id\" class=\"icon-block\" @tap=\"goPage(icon.id)\">\r\n          <image class=\"icon-img\" :src=\"icon.img\" mode=\"widthFix\" />\r\n          <text class=\"icon-label\">{{ icon.label }}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.flavor-page {\r\n  min-height: 100vh;\r\n  padding: 32rpx 28rpx 20rpx;\r\n  padding-bottom: calc(280rpx + env(safe-area-inset-bottom));\r\n  background: #fffef7;\r\n  color: #5a2c12;\r\n  font-family: 'LXGW WenKai Screen', 'PingFang SC', system-ui;\r\n  position: relative;\r\n}\r\n\r\n/* 搜索框 + 图标 */\r\n.top-search {\r\n  position: relative;\r\n  width: 70%;\r\n  margin-left: -10rpx;\r\n  margin-top: -25rpx;\r\n}\r\n.search-input {\r\n  height: 72rpx;\r\n  background: #ffe6a8;\r\n  border-radius: 36rpx;\r\n  padding: 0 72rpx 0 24rpx;\r\n  box-shadow: 0 6rpx 12rpx rgba(0,0,0,0.08);\r\n}\r\n.search-icon {\r\n  position: absolute;\r\n  right: 8rpx;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  width: 56rpx;\r\n  height: 56rpx;\r\n  border-radius: 50%;\r\n  border: 4rpx solid #cfa86a;\r\n  color: #cfa86a;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 600;\r\n}\r\n\r\n/* 棕色虚线分隔 */\r\n.brown-dashed {\r\n  margin: 10rpx 0 12rpx;\r\n  height: 0;\r\n  border-top: 10rpx dashed #7b4a2b;\r\n}\r\n\r\n/* 上方图片位占位 */\r\n.image-holder {\r\n  height: auto;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0;\r\n  margin-left: -28rpx;\r\n  margin-right: -28rpx;\r\n  margin-top: -17rpx;\r\n}\r\n.holder-text { color: #c59a6a; }\r\n.holder-img {\r\n  width: 100%;\r\n  height: 380rpx;\r\n  display: block;\r\n  border-radius: 12rpx;\r\n  object-fit: cover;\r\n  object-position: top;\r\n}\r\n\r\n/* 黑色线格子 */\r\n.grid-wrap {\r\n  display: flex;\r\n  border: 6rpx solid #5a2c12;\r\n  border-radius: 16rpx;\r\n  overflow: hidden;\r\n  margin-left: -28rpx;\r\n  margin-right: -28rpx;\r\n  margin-top: 1rpx;\r\n  margin-bottom: 40rpx;\r\n  height: calc(100vh - 220rpx - 120rpx);\r\n}\r\n.grid-left {\r\n  width: 188rpx;\r\n  border-right: 6rpx solid #5a2c12;\r\n}\r\n.left-header {\r\n  font-weight: 700;\r\n  padding: 16rpx;\r\n  border-bottom: 6rpx solid #5a2c12;\r\n}\r\n.left-lines {\r\n  overflow-y: auto;\r\n  height: calc(100vh - 220rpx - 120rpx - 57rpx);\r\n}\r\n\r\n.left-lines .left-cell {\r\n  height: 65rpx;\r\n  padding: 0 17rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  border-bottom: 6rpx solid #5a2c12;\r\n}\r\n\r\n.left-lines .left-cell.active { \r\n  background: #fff5dc; \r\n}\r\n\r\n.left-lines .left-cell.last-item {\r\n  border-bottom: 6rpx solid #5a2c12 !important;\r\n}\r\n\r\n.left-lines .left-cell:last-child { \r\n  border-bottom: 6rpx solid #5a2c12; \r\n}\r\n\r\n.grid-right {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  height: calc(100vh - 320rpx - 120rpx);\r\n}\r\n.food-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-bottom: 6rpx solid #5a2c12;\r\n  padding: 18rpx 16rpx;\r\n}\r\n\r\n.grid-right .food-row:last-child { border-bottom: 0; }\r\n.food-card {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n.food-name {\r\n  font-weight: 700;\r\n  min-width: 160rpx;\r\n}\r\n.food-img {\r\n  margin-left: auto;\r\n  width: 180rpx;\r\n  height: 120rpx;\r\n  background: #fff3d6;\r\n  border: 4rpx solid #cfa86a;\r\n  border-radius: 12rpx;\r\n  object-fit: cover;\r\n  display: block;\r\n}\r\n.add-circle {\r\n  width: 64rpx;\r\n  height: 64rpx;\r\n  border-radius: 50%;\r\n  border: 4rpx solid #e3b34b;\r\n  color: #e3b34b;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transform: translateX(10rpx);\r\n}\r\n.plus { font-size: 36rpx; line-height: 1; }\r\n\r\n/* 加载和空状态提示 */\r\n.loading-tip,\r\n.empty-tip {\r\n  text-align: center;\r\n  padding: 60rpx 20rpx;\r\n  font-size: 28rpx;\r\n  color: #999;\r\n}\r\n\r\n\r\n/* 筷子分割线（与首页一致风格） */\r\n.chopsticks {\r\n  width: 100%;\r\n  height: auto;\r\n  display: block;\r\n  margin: 24rpx 0;\r\n  border-radius: 0;\r\n}\r\n.chopsticks::after { content: none; }\r\n\r\n/* 固定在底部图标上方的筷子图片 */\r\n.chopsticks-fixed {\r\n  position: absolute;\r\n  left: 12rpx;\r\n  right: 12rpx;\r\n  top: 60rpx;\r\n  width: calc(100% - 24rpx);\r\n  height: auto;\r\n  display: block;\r\n  z-index: 19;\r\n  border-radius: 0;\r\n}\r\n\r\n/* 复用首页底部图标布局样式（关键选择器与结构保持一致） */\r\n.icons-top {\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: -20rpx 0 20rpx;\r\n  padding-top: 0;\r\n  z-index:-1;\r\n}\r\n.icons-top .icon-block {\r\n  transform: translateY(75rpx);\r\n  will-change: transform;\r\n}\r\n.icons-top::before {\r\n  content: none;\r\n}\r\n.icons-bottom {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  gap: 35rpx;\r\n  padding: 0 10rpx;\r\n  background: transparent;\r\n  margin-top: -12rpx;\r\n}\r\n.icons-bottom .icon-block:nth-child(2) { margin-right: 24rpx; }\r\n.icons-bottom .icon-block:nth-child(3) { margin-left: 24rpx; }\r\n\r\n.icon-block {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 32%;\r\n}\r\n.icon-img { width: 58rpx; height: auto; display: block; }\r\n.icons-top .icon-img { width: 68rpx; }\r\n.icon-label {\r\n  margin-top: 10rpx;\r\n  font-size: 26rpx;\r\n  color: #5a2c12;\r\n  text-align: center;\r\n}\r\n.top-circle-wrap {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #ffffff;\r\n  border-radius: 50%;\r\n  padding: 18rpx;\r\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.06);\r\n  border: 0;\r\n  position: relative;\r\n  z-index: -2;\r\n}\r\n.icons-fixed {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 60rpx;\r\n  padding: 60rpx 20rpx 16rpx;\r\n  background: transparent;\r\n  z-index: 20;\r\n}\r\n.icons-fixed::before {\r\n  content: '';\r\n  position: absolute;\r\n  left: 12rpx;\r\n  right: 12rpx;\r\n  bottom: -5rpx;\r\n  top: 158rpx;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  border-radius: 28rpx;\r\n  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.08);\r\n  z-index: -1;\r\n}\r\n\r\n</style>","import mod from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=786192cc&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=786192cc&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1764521018843\n      var cssReload = require(\"C:/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}